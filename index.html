<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0">

<title>Mishell Boutique</title>

<!-- Preconnect para recursos externos crÃ­ticos -->
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://www.gstatic.com" crossorigin>
<link rel="dns-prefetch" href="https://www.googletagmanager.com">

<!-- CSS crÃ­tico con carga optimizada -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="style.css?v=1.8.3">
<link rel="manifest" href="manifest.json">
<link rel="icon" href="icon.svg" type="image/svg+xml">
<meta name="theme-color" content="#D988B9">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Mishell">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>

<header class="navbar navbar-expand-lg sticky-top">
<div class="container">

<a class="navbar-brand" href="index.html">MISHELL</a>

<div class="navbar-collapse" id="navCollapse">

<div class="catalog-filters mx-auto d-flex align-items-center">
<!-- Todos los productos -->
<button class="btn filter-group active d-none d-lg-inline-flex" data-filter="disponible">
<i class="bi bi-grid-fill"></i> Disponibles
</button>

<!-- Promociones destacadas -->
<button class="btn filter-group filter-promo d-none d-lg-inline-flex" data-filter="promocion">
<i class="bi bi-tag-fill"></i> Promociones
</button>

<div class="dropdown d-inline-block">
<button class="btn filter-group" type="button" data-bs-toggle="dropdown" aria-expanded="false" id="category-dropdown-button">
<i class="bi bi-list-ul"></i> CategorÃ­as <i class="bi bi-chevron-down" style="font-size: 0.8em;"></i>
</button>
<ul class="dropdown-menu dropdown-menu-enhanced" id="category-dropdown-menu">
<li><a class="dropdown-item" href="#">Cargando...</a></li>
</ul>
</div>
</div>

<div class="d-flex align-items-center ms-lg-auto">
<div class="search-box d-none d-lg-block me-3">
<input type="text" class="form-control" id="search-input" placeholder="Buscar...">
<i class="bi bi-search search-icon"></i>
</div>

<div class="d-none d-lg-block">
<a href="#" class="cart-icon" data-bs-toggle="offcanvas" data-bs-target="#cartOffcanvas">
<i class="bi bi-cart3"></i>
<span class="cart-counter" id="cart-badge-desktop">0</span>
</a>
</div>
</div>

</div>
</div>
</header>


<main class="container my-4" id="main-content">

<div class="promotions-section mb-4" id="promotions-section" style="display: none;">
<h2 class="promotions-title">Promociones Imperdibles</h2>
<div id="promotions-container"></div>
</div>

<div class="row">
<!-- Overlay para filtros mÃ³vil -->
<div class="filters-overlay" id="filters-overlay"></div>

<!-- BotÃ³n toggle filtros mÃ³vil - OCULTO -->
<div class="col-12 d-none mb-3">
<button class="btn btn-outline-primary btn-toggle-filters w-100" id="btn-toggle-filters">
<i class="bi bi-filter-circle-fill"></i> Mostrar Filtros
</button>
</div>

<!-- Sidebar de Filtros -->
<aside class="col-lg-3 mb-4 filters-sidebar-mobile" id="filters-sidebar">
<div class="filters-container">
<div class="filters-header">
<h5 class="filters-title">Filtros</h5>
<button class="btn-reset-filters" id="btn-reset-filters">Limpiar</button>
</div>

<!-- Contador de Productos -->
<div class="products-count-filter">
<span id="products-count">0</span> <span class="d-none d-md-inline">productos encontrados</span><span class="d-md-none">encontrados</span>
</div>

<!-- Filtro por Precio -->
<div class="filter-section">
<h6 class="filter-section-title">Precio</h6>
<div class="price-filter-content">
<div class="price-inputs">
<div class="price-input-group">
<label>MÃ­nimo</label>
<input type="number" id="price-min" class="form-control form-control-sm" placeholder="$0" min="0">
</div>
<div class="price-input-group">
<label>MÃ¡ximo</label>
<input type="number" id="price-max" class="form-control form-control-sm" placeholder="$500.000" min="0">
</div>
</div>
<div class="price-range-slider">
<input type="range" id="price-range-min" class="form-range" min="0" max="500000" step="5000" value="0">
<input type="range" id="price-range-max" class="form-range" min="0" max="500000" step="5000" value="500000">
</div>
<div class="price-display">
<span id="price-display-min">$0</span> - <span id="price-display-max">$500.000</span>
</div>
</div>
</div>

<!-- Filtro por Colores -->
<div class="filter-section">
<h6 class="filter-section-title">Colores</h6>
<div class="color-filter-content" id="color-filter-container">
<!-- Se llenarÃ¡ dinÃ¡micamente -->
</div>
</div>

<!-- Filtro por Ordenamiento -->
<div class="filter-section">
<h6 class="filter-section-title">Ordenar por</h6>
<div class="sort-filter-content">
<select class="form-select form-select-sm" id="sort-products">
<option value="newest">Recientes</option>
<option value="price-asc">Precio: Menor a Mayor</option>
<option value="price-desc">Precio: Mayor a Menor</option>
<option value="name-asc">Nombre: A-Z</option>
<option value="name-desc">Nombre: Z-A</option>
</select>
</div>
</div>

<!-- Filtro por Disponibilidad -->
<div class="filter-section">
<h6 class="filter-section-title">Disponibilidad</h6>
<div class="availability-filter-content">
<div class="form-check">
<input class="form-check-input" type="checkbox" id="filter-in-stock">
<label class="form-check-label" for="filter-in-stock">
Solo productos disponibles
</label>
</div>
<div class="form-check">
<input class="form-check-input" type="checkbox" id="filter-promo-only">
<label class="form-check-label" for="filter-promo-only">
Solo en promociÃ³n
</label>
</div>
</div>
</div>

<!-- BotÃ³n Aplicar Filtros -->
<div class="filter-actions">
<button class="btn btn-primary btn-apply-filters w-100" id="btn-apply-filters">
Aplicar Filtros
</button>
</div>
</div>
</aside>

<!-- Productos -->
<div class="col-lg-9">
<div class="row g-3 g-md-4" id="products-container">
<div class="col-12 text-center py-5" id="loading-products">
<div class="loading-spinner"></div>
<p class="mt-3 text-muted">Cargando productos</p>
</div>
</div>
</div>
</div>
</main>

<footer class="footer-minimal">
<div class="container">
<div class="d-flex flex-column flex-md-row justify-content-md-between align-items-center">

<form class="wholesale-form d-flex mb-3 mb-md-0" id="wholesale-form">
<input type="text" class="form-control me-2" id="wholesale-code" placeholder="CÃ³digo mayorista">
<button type="submit" class="btn btn-primary btn-sm">Activar</button>
</form>

<p class="text-muted small m-0">Â© 2025 Todos los derechos reservados.</p>

</div>
</div>
</footer>

<nav class="mobile-bottom-nav d-lg-none">
<button class="nav-item active" id="mobile-home-btn">
<i class="bi bi-house-heart-fill"></i>
<span>Inicio</span>
</button>
<button class="nav-item" id="mobile-search-btn">
<i class="bi bi-search"></i>
<span>Buscar</span>
</button>
<button class="nav-item" id="mobile-promo-btn">
<i class="bi bi-tag-fill"></i>
<span>Promos</span>
</button>
<button class="nav-item" id="mobile-cart-btn" data-bs-toggle="offcanvas" data-bs-target="#cartOffcanvas">
<i class="bi bi-cart3"></i>
<span>Carrito</span>
<span class="cart-badge" id="cart-badge-mobile" style="display: none;">0</span>
</button>
</nav>

<div id="searchModal" class="search-modal">
<button class="btn-close-modal" id="close-search-modal">&times;</button>
<div class="search-modal-content">
<h2 class="search-modal-title">Â¿QuÃ© estÃ¡s buscando?</h2>
<div class="search-box">
<input type="text" class="form-control" id="search-modal-input" placeholder="Buscar vestidos, blusas...">
<i class="bi bi-search search-icon"></i>
</div>
</div>
</div>

<div class="toast-container position-fixed p-3">
<div id="liveToast" class="toast align-items-center text-white border-0" role="alert">
<div class="d-flex">
<div class="toast-body" id="toast-body">Mensaje</div>
<button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
</div>
</div>
</div>

<div class="modal fade" id="productModal" tabindex="-1">
<div class="modal-dialog modal-lg modal-dialog-centered">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title" id="modal-product-name">Producto</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<div class="row g-4">
<div class="col-md-6">
<img src="" id="modal-product-image" class="modal-product-image" alt="Producto" loading="lazy">
</div>
<div class="col-md-6 d-flex flex-column">
<p id="modal-product-desc" class="mb-3 modal-description"></p>

<div class="mb-4 price-container-modal">
<div class="price-detal-modal">
<span class="price-detal-old" id="modal-price-old" style="display: none;"></span>
<span class="price-detal" id="modal-price-detal">$0</span>
<span>(Detal)</span>
</div>
<div class="price-mayor-modal">
<span class="price-mayor" id="modal-price-mayor">$0</span>
<span>(Mayor)</span>
</div>
</div>

<input type="hidden" id="modal-product-id">
<input type="hidden" id="selected-talla">
<input type="hidden" id="selected-color">
<div class="mb-3" id="tallas-container">
<label class="selector-label">Talla</label>
<div id="tallas-buttons" class="size-color-buttons"></div>
</div>
<div class="mb-3" id="colores-container">
<label class="selector-label">Color</label>
<div id="colores-buttons" class="size-color-buttons"></div>
</div>
<div class="mb-3">
<label class="selector-label">Cantidad</label>
<div class="quantity-selector">
<button class="quantity-btn" id="quantity-minus" type="button">-</button>
<input type="number" id="select-cantidad" value="1" min="1" readonly>
<button class="quantity-btn" id="quantity-plus" type="button">+</button>
</div>
</div>
<div class="mb-3">
<label class="selector-label">ObservaciÃ³n (Opcional)</label>
<textarea class="form-control" id="product-observation" rows="2" placeholder="Ej: Sin etiqueta, empaque especial..."></textarea>
</div>
<div class="stock-display mb-4" id="stock-display">
<span id="stock-text">Seleccione talla y color</span>
</div>
<button class="btn btn-primary btn-lg w-100 mt-auto" id="btn-add-cart" disabled>
Agregar al Carrito
</button>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="offcanvas offcanvas-end" tabindex="-1" id="cartOffcanvas" style="width: 420px;">
<div class="offcanvas-header">
<h5 class="offcanvas-title">Tu Carrito</h5>
<button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
</div>
<div class="offcanvas-body p-0">
<div id="cart-items-container">
<div class="text-center py-5" id="cart-empty">
<i class="bi bi-cart-x" style="font-size: 3rem; opacity: 0.3;"></i>
<p class="mt-3 text-muted">Tu carrito estÃ¡ vacÃ­o</p>
</div>
</div>
</div>
<div class="cart-total" id="cart-footer" style="display: none;">
<div class="d-flex justify-content-between align-items-center mb-3">
<span class="total-label">Total</span>
<span class="total-amount" id="cart-total">$0</span>
</div>
<button class="btn btn-primary btn-lg w-100" data-bs-toggle="modal" data-bs-target="#checkoutModal">
Finalizar Pedido
</button>
</div>
</div>

<div class="modal fade" id="checkoutModal" tabindex="-1">
<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
<div class="modal-content checkout-premium">
<div class="modal-header checkout-header">
<div class="header-content">
<div class="pulse-dot"></div>
<h5 class="modal-title">âœ¨ Finalizar Tu Pedido</h5>
<p class="header-subtitle">Completa la informaciÃ³n para recibir tu orden</p>
</div>
<button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<form id="checkout-form">

<!-- Card de InformaciÃ³n Personal -->
<div class="form-card" data-card="1">
<div class="card-header-mini">
<span class="card-icon">ğŸ‘¤</span>
<span class="card-title">InformaciÃ³n Personal</span>
</div>
<div class="form-group-modern">
<label class="selector-label">
<span class="label-icon">ğŸ†”</span>
CÃ©dula
</label>
<input type="text" class="form-control form-control-modern" id="checkout-cedula" placeholder="1234567890" required>
<small class="text-muted">Cliente registrado? Tus datos se cargan automÃ¡ticamente</small>
</div>
<div class="delivery-info" id="delivery-info" style="display: none;">
<div class="info-title">ğŸ“¦ InformaciÃ³n de EnvÃ­o</div>
<div class="info-content">Pedido fuera de MonterÃ­a</div>
<div class="cedula-display">CÃ©dula: <span id="cedula-display">-</span></div>
</div>
<div class="form-group-modern">
<label class="selector-label">
<span class="label-icon">âœï¸</span>
Nombre Completo
</label>
<input type="text" class="form-control form-control-modern" id="checkout-name" placeholder="Ej: MarÃ­a GarcÃ­a" required>
</div>
<div class="form-group-modern">
<label class="selector-label">
<span class="label-icon">ğŸ“±</span>
WhatsApp
</label>
<input type="tel" class="form-control form-control-modern" id="checkout-phone" placeholder="300 123 4567" required>
</div>
</div>

<!-- Card de DirecciÃ³n de EnvÃ­o -->
<div class="form-card" data-card="2">
<div class="card-header-mini">
<span class="card-icon">ğŸ“</span>
<span class="card-title">DirecciÃ³n de EnvÃ­o</span>
</div>
<div class="form-group-modern">
<label class="selector-label">
<span class="label-icon">ğŸ™ï¸</span>
Ciudad
</label>
<select class="form-select form-control-modern" id="checkout-city" required>
<option value="">Selecciona tu ciudad</option>
<option value="MonterÃ­a">MonterÃ­a</option>
<option value="CeretÃ©">CeretÃ©</option>
<option value="Lorica">Lorica</option>
<option value="SahagÃºn">SahagÃºn</option>
<option value="Planeta Rica">Planeta Rica</option>
<option value="MontelÃ­bano">MontelÃ­bano</option>
<option value="Tierralta">Tierralta</option>
<option value="Ayapel">Ayapel</option>
<option value="Otra">Otra ciudad</option>
</select>
</div>
<div class="form-group-modern" id="neighborhood-section" style="display: none;">
<label class="selector-label">
<span class="label-icon">ğŸ˜ï¸</span>
Barrio
</label>
<input type="text" class="form-control form-control-modern" id="checkout-neighborhood" list="neighborhood-list" placeholder="Escribe o selecciona">
<datalist id="neighborhood-list"></datalist>
</div>
<div class="form-group-modern">
<label class="selector-label">
<span class="label-icon">ğŸ </span>
DirecciÃ³n Completa
</label>
<input type="text" class="form-control form-control-modern" id="checkout-address" placeholder="Calle 123 #45-67" required>
</div>
<div class="form-group-modern">
<label class="selector-label">
<span class="label-icon">ğŸ“</span>
Observaciones
</label>
<textarea class="form-control form-control-modern" id="checkout-notes" rows="2" placeholder="Instrucciones especiales, referencias..."></textarea>
</div>
</div>

<!-- Card de MÃ©todo de Pago -->
<div class="form-card" data-card="3">
<div class="card-header-mini">
<span class="card-icon">ğŸ’³</span>
<span class="card-title">MÃ©todo de Pago</span>
</div>
<div class="form-group-modern">
<label class="selector-label">
<span class="label-icon">ğŸ’°</span>
Forma de Pago
</label>
<select class="form-select form-control-modern" id="checkout-payment" required>
<option value="">Selecciona una opciÃ³n</option>
<option value="Efectivo" id="payment-efectivo">ğŸ’µ Efectivo (Pago contra entrega)</option>
<option value="Transferencia">ğŸ¦ Transferencia Bancaria</option>
</select>
<small class="text-muted" id="payment-info"></small>
</div>
<div class="form-group-modern" id="cash-payment-section" style="display: none;">
<label class="selector-label">
<span class="label-icon">ğŸ’¸</span>
Monto con el que pagas
</label>
<input type="number" class="form-control form-control-modern" id="checkout-cash-amount" placeholder="50000" min="0">
<div class="mt-2" id="change-display" style="display: none;">
<div class="change-card">
<div class="change-item">
<span class="change-label">Total del pedido:</span>
<span class="change-value" id="change-total">$0</span>
</div>
<div class="change-item highlight">
<span class="change-label">Vuelto a entregar:</span>
<span class="change-value" id="change-amount">$0</span>
</div>
</div>
</div>
</div>
</div>

<button type="submit" class="btn-submit-premium">
<span class="btn-text">Confirmar Pedido</span>
<span class="btn-icon">â†’</span>
</button>

</form>
</div>
</div>
</div>
</div>

<div class="modal fade" id="deleteCartModal" tabindex="-1">
<div class="modal-dialog modal-dialog-centered modal-sm">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title">Confirmar</h5>
<button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>
<div class="modal-body">
<p>Â¿Eliminar este producto del carrito?</p>
</div>
<div class="modal-footer">
<button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Cancelar</button>
<button type="button" class="btn btn-danger btn-sm" id="confirm-delete-cart-item">Eliminar</button>
</div>
</div>
</div>
</div>

<div id="imageZoomOverlay" class="image-zoom-overlay">
<button class="zoom-close-btn" id="closeZoomBtn">&times;</button>
<img src="" id="zoomedImage" class="zoomed-image" alt="Producto ampliado" loading="lazy">
</div>

<!-- Scripts optimizados con carga diferida -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>

<!-- Google Analytics 4 - Cargado al final para no bloquear renderizado -->
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-ABC123XYZ', {
    'send_page_view': true,
    'page_title': document.title,
    'page_location': window.location.href
  });
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>

<!-- Scripts de la aplicaciÃ³n -->
<script type="module" src="analytics.js?v=1.0.0"></script>
<script type="module" src="app.js?v=1.9.1"></script>


</body>
</html>
